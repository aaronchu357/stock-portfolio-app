{"ast":null,"code":"var _jsxFileName = \"/Users/aaronchu/Development/stock-portfolio-app/frontend/src/containers/PortfolioPage.js\";\nimport React from 'react';\nimport Portfolio from './Portfolio';\n\nclass PortfolioPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userData: '',\n      balance: 0\n    };\n\n    this.handleBalanceChange = remainingBalance => {\n      fetch(\"http://localhost:3000/users/\".concat(this.props.userData.id), {\n        method: 'PATCH',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          balance: remainingBalance\n        })\n      }).then(resp => resp.json()).then(userData => {\n        setUserData(userData.data);\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch('http://localhost:3000/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      }).then(resp => resp.json()).then(userInfo => {\n        this.setState({\n          userData: userInfo.data,\n          balance: userInfo.data.attributes.balance\n        });\n      });\n    }\n  }\n\n  // useEffect(() => {\n  //   if (props.userData !== \"\") {\n  //     setUserData(props.userData)\n  //   } else {\n  //     props.history.push('/signin')\n  //   }\n  // }, [userData])\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"page-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Portfolio\"), \"Hi, \", this.state.userData ? this.state.userData.attributes.name : null, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), \"Balance: \", this.state.balance ? this.state.balance : null, React.createElement(Portfolio, Object.assign({}, this.props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default PortfolioPage;","map":{"version":3,"sources":["/Users/aaronchu/Development/stock-portfolio-app/frontend/src/containers/PortfolioPage.js"],"names":["React","Portfolio","PortfolioPage","Component","state","userData","balance","handleBalanceChange","remainingBalance","fetch","props","id","method","headers","body","JSON","stringify","then","resp","json","setUserData","data","componentDidMount","localStorage","token","Authorization","userInfo","setState","attributes","render","name"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAEA,MAAMC,aAAN,SAA4BF,KAAK,CAACG,SAAlC,CAA4C;AAAA;AAAA;AAAA,SAE1CC,KAF0C,GAElC;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,OAAO,EAAE;AAFH,KAFkC;;AAAA,SAqBzCC,mBArByC,GAqBlBC,gBAAD,IAAsB;AAC3CC,MAAAA,KAAK,uCAAgC,KAAKC,KAAL,CAAWL,QAAX,CAAoBM,EAApD,GAA0D;AAC7DC,QAAAA,MAAM,EAAE,OADqD;AAE7DC,QAAAA,OAAO,EAAE;AACP,oBAAU,kBADH;AAEP,0BAAgB;AAFT,SAFoD;AAM7DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEV,UAAAA,OAAO,EAAEE;AAAX,SAAf;AANuD,OAA1D,CAAL,CAQGS,IARH,CAQQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EARhB,EASGF,IATH,CASQZ,QAAQ,IAAI;AAChBe,QAAAA,WAAW,CAACf,QAAQ,CAACgB,IAAV,CAAX;AACD,OAXH;AAYD,KAlCyC;AAAA;;AAO1CC,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,YAAY,CAACC,KAAjB,EAAwB;AACtBf,MAAAA,KAAK,CAAC,+BAAD,EAAkC;AACrCI,QAAAA,OAAO,EAAE;AACPY,UAAAA,aAAa,EAAEF,YAAY,CAACC;AADrB;AAD4B,OAAlC,CAAL,CAKGP,IALH,CAKQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EALhB,EAMGF,IANH,CAMQS,QAAQ,IAAI;AAChB,aAAKC,QAAL,CAAc;AAAEtB,UAAAA,QAAQ,EAAEqB,QAAQ,CAACL,IAArB;AAA2Bf,UAAAA,OAAO,EAAEoB,QAAQ,CAACL,IAAT,CAAcO,UAAd,CAAyBtB;AAA7D,SAAd;AACD,OARH;AASD;AACF;;AAiBD;AACA;AACA;AACA;AACA;AACA;AACA;AACAuB,EAAAA,MAAM,GAAG;AAEP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,UAEO,KAAKzB,KAAL,CAAWC,QAAX,GAAsB,KAAKD,KAAL,CAAWC,QAAX,CAAoBuB,UAApB,CAA+BE,IAArD,GAA4D,IAFnE,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,eAIY,KAAK1B,KAAL,CAAWE,OAAX,GAAqB,KAAKF,KAAL,CAAWE,OAAhC,GAA0C,IAJtD,EAKE,oBAAC,SAAD,oBAAe,KAAKI,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OALF,CADF;AASD;;AAtDyC;;AAyD5C,eAAeR,aAAf","sourcesContent":["import React from 'react'\nimport Portfolio from './Portfolio'\n\nclass PortfolioPage extends React.Component {\n\n  state = {\n    userData: '',\n    balance: 0\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch('http://localhost:3000/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      })\n        .then(resp => resp.json())\n        .then(userInfo => {\n          this.setState({ userData: userInfo.data, balance: userInfo.data.attributes.balance })\n        })\n    }\n  }\n\n   handleBalanceChange = (remainingBalance) => {\n    fetch(`http://localhost:3000/users/${this.props.userData.id}`, {\n      method: 'PATCH',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ balance: remainingBalance })\n    })\n      .then(resp => resp.json())\n      .then(userData => {\n        setUserData(userData.data)\n      })\n  }\n\n  // useEffect(() => {\n  //   if (props.userData !== \"\") {\n  //     setUserData(props.userData)\n  //   } else {\n  //     props.history.push('/signin')\n  //   }\n  // }, [userData])\n  render() {\n\n    return (\n      <div>\n        <h2 className=\"page-header\">Portfolio</h2>\n        Hi, {this.state.userData ? this.state.userData.attributes.name : null}\n        <br />\n        Balance: {this.state.balance ? this.state.balance : null}\n        <Portfolio {...this.props} />\n      </div>\n    )\n  }\n}\n\nexport default PortfolioPage"]},"metadata":{},"sourceType":"module"}