{"ast":null,"code":"import _slicedToArray from \"/Users/aaronchu/Development/stock-portfolio-app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/aaronchu/Development/stock-portfolio-app/frontend/src/pages/PortfolioPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport Portfolio from '../containers/Portfolio';\nimport NavBar from '../components/NavBar';\n\nconst PortfolioPage = props => {\n  const _useState = useState({\n    userData: '',\n    balance: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        portfolioPageState = _useState2[0],\n        setPortfolioPageState = _useState2[1];\n\n  useEffect(() => {\n    if (localStorage.token) {\n      fetch('http://localhost:3000/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      }).then(resp => resp.json()).then(userInfo => {\n        setPortfolioPageState({\n          userData: userInfo.data,\n          balance: userInfo.data.attributes.balance\n        });\n      });\n    }\n  }, [props.userData]);\n\n  const handleBalanceChange = remainingBalance => {\n    fetch(\"http://localhost:3000/users/\".concat(props.userData.id), {\n      method: 'PATCH',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        balance: remainingBalance\n      })\n    }).then(resp => resp.json()).then(userData => {\n      setPortfolioPageState({\n        userData: userData.data\n      });\n      window.location.reload();\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(NavBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), React.createElement(\"h2\", {\n    className: \"page-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Portfolio\"), \"Hi, \", portfolioPageState.userData ? portfolioPageState.userData.attributes.name : null, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }), \"Balance: \", portfolioPageState.balance ? portfolioPageState.balance : null, React.createElement(Portfolio, Object.assign({}, props, {\n    handleBalanceChange: handleBalanceChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  })));\n};\n\nexport default PortfolioPage;","map":{"version":3,"sources":["/Users/aaronchu/Development/stock-portfolio-app/frontend/src/pages/PortfolioPage.js"],"names":["React","useState","useEffect","Portfolio","NavBar","PortfolioPage","props","userData","balance","portfolioPageState","setPortfolioPageState","localStorage","token","fetch","headers","Authorization","then","resp","json","userInfo","data","attributes","handleBalanceChange","remainingBalance","id","method","body","JSON","stringify","window","location","reload","name"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;;AAEA,MAAMC,aAAa,GAAGC,KAAK,IAAI;AAAA,oBAEuBL,QAAQ,CAAC;AAC3DM,IAAAA,QAAQ,EAAE,EADiD;AAE3DC,IAAAA,OAAO,EAAE;AAFkD,GAAD,CAF/B;AAAA;AAAA,QAEtBC,kBAFsB;AAAA,QAEFC,qBAFE;;AAO7BR,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIS,YAAY,CAACC,KAAjB,EAAwB;AACtBC,MAAAA,KAAK,CAAC,+BAAD,EAAkC;AACrCC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEJ,YAAY,CAACC;AADrB;AAD4B,OAAlC,CAAL,CAKGI,IALH,CAKQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EALhB,EAMGF,IANH,CAMQG,QAAQ,IAAI;AAChBT,QAAAA,qBAAqB,CAAC;AACpBH,UAAAA,QAAQ,EAAEY,QAAQ,CAACC,IADC;AAEpBZ,UAAAA,OAAO,EAAEW,QAAQ,CAACC,IAAT,CAAcC,UAAd,CAAyBb;AAFd,SAAD,CAArB;AAID,OAXH;AAYD;AACF,GAfQ,EAeN,CAACF,KAAK,CAACC,QAAP,CAfM,CAAT;;AAiBA,QAAMe,mBAAmB,GAAGC,gBAAgB,IAAI;AAC9CV,IAAAA,KAAK,uCAAgCP,KAAK,CAACC,QAAN,CAAeiB,EAA/C,GAAqD;AACxDC,MAAAA,MAAM,EAAE,OADgD;AAExDX,MAAAA,OAAO,EAAE;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OAF+C;AAMxDY,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEpB,QAAAA,OAAO,EAAEe;AAAX,OAAf;AANkD,KAArD,CAAL,CAQGP,IARH,CAQQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EARhB,EASGF,IATH,CASQT,QAAQ,IAAI;AAChBG,MAAAA,qBAAqB,CAAC;AAAEH,QAAAA,QAAQ,EAAEA,QAAQ,CAACa;AAArB,OAAD,CAArB;AACAS,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,KAZH;AAaD,GAdD;;AAgBA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAI,IAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,UAGOtB,kBAAkB,CAACF,QAAnB,GAA8BE,kBAAkB,CAACF,QAAnB,CAA4Bc,UAA5B,CAAuCW,IAArE,GAA4E,IAHnF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAKYvB,kBAAkB,CAACD,OAAnB,GAA6BC,kBAAkB,CAACD,OAAhD,GAA0D,IALtE,EAME,oBAAC,SAAD,oBAAeF,KAAf;AAAsB,IAAA,mBAAmB,EAAEgB,mBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KANF,CADF;AAUD,CAlDD;;AAoDA,eAAejB,aAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Portfolio from '../containers/Portfolio'\nimport NavBar from '../components/NavBar'\n\nconst PortfolioPage = props => {\n\n  const [portfolioPageState, setPortfolioPageState] = useState({\n    userData: '',\n    balance: ''\n  })\n\n  useEffect(() => {\n    if (localStorage.token) {\n      fetch('http://localhost:3000/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      })\n        .then(resp => resp.json())\n        .then(userInfo => {\n          setPortfolioPageState({\n            userData: userInfo.data,\n            balance: userInfo.data.attributes.balance\n          })\n        })\n    }\n  }, [props.userData])\n\n  const handleBalanceChange = remainingBalance => {\n    fetch(`http://localhost:3000/users/${props.userData.id}`, {\n      method: 'PATCH',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ balance: remainingBalance })\n    })\n      .then(resp => resp.json())\n      .then(userData => {\n        setPortfolioPageState({ userData: userData.data })\n        window.location.reload()\n      })\n  }\n\n  return (\n    <div>\n      <NavBar />\n      <h2 className=\"page-header\">Portfolio</h2>\n      Hi, {portfolioPageState.userData ? portfolioPageState.userData.attributes.name : null}\n      <br />\n      Balance: {portfolioPageState.balance ? portfolioPageState.balance : null}\n      <Portfolio {...props} handleBalanceChange={handleBalanceChange} />\n    </div>\n  )\n}\n\nexport default PortfolioPage"]},"metadata":{},"sourceType":"module"}