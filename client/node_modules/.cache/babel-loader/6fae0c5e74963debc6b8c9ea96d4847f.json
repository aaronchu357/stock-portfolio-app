{"ast":null,"code":"var _jsxFileName = \"/Users/aaronchu/Development/stock-portfolio-app/frontend/src/containers/Portfolio.js\";\nimport React, { useState, useEffect } from 'react';\nimport BuyStockForm from '../forms/BuyStockForm';\n\nconst Portfolio = props => {\n  // const [userData, setUserData] = useState([])\n  // useEffect(() => {\n  //   debugger\n  //   if (localStorage.token) {\n  //     fetch('/profile', {\n  //       headers: {\n  //         Authorization: localStorage.token\n  //       }\n  //     })\n  //       .then(resp => resp.json())\n  //       .then(userInfo => {\n  //         debugger\n  //         setUserData(userInfo.data.attributes)\n  //       })\n  //   } else {\n  //     props.history.push('/signin')\n  //   }\n  // }, [userData])  \n  // state = { userData: '' }\n  // componentDidMount() {\n  //   if (localStorage.token) {\n  //     fetch('http://localhost:3000/profile', {\n  //       headers: {\n  //         Authorization: localStorage.token\n  //       }\n  //     })\n  //       .then(resp => resp.json())\n  //       .then(userInfo => {\n  //         this.setState({ userData: userInfo.data.attributes })\n  //       })\n  //   }\n  // }\n  // render(){\n  const handleStockFormSubmit = (ticker, quantity) => {\n    fetch(\"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=\".concat(ticker, \"&apikey=GJNL5RPAWAUNFOK6\")).then(resp => resp.json()).then(stockData => {\n      let userBalance = props.userData.balance;\n      let transactionTotal = stockData[\"Global Quote\"][\"05. price\"] * quantity;\n\n      if (userBalance < transactionTotal) {\n        alert(\"Balance insufficient. Transaction total is \".concat(transactionTotal, \".\"));\n      } else {\n        handleStock(ticker, quantity, userBalance, transactionTotal);\n      }\n    }).catch(error => {\n      alert(\"Incorrect Ticker Symbol.\");\n    });\n  };\n\n  const handleStock = (ticker, price, balance, total) => {\n    fetch('http://localhost:3000/stocks', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({\n        ticker: ticker,\n        price: price\n      }).then(resp => resp.json()).then(stockData => {\n        handleTransaction(stockData, balance, total);\n      })\n    });\n  };\n\n  const handleTransaction = (stockData, balance, total) => {};\n\n  return React.createElement(\"div\", {\n    className: \"portfolio\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"page-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Portfolio\"), \"Hi, \", props.userData.name, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), \"Balance: \", props.userData.balance, React.createElement(BuyStockForm, Object.assign({}, props, {\n    handleStockFormSubmit: handleStockFormSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  })));\n};\n\nexport default Portfolio;","map":{"version":3,"sources":["/Users/aaronchu/Development/stock-portfolio-app/frontend/src/containers/Portfolio.js"],"names":["React","useState","useEffect","BuyStockForm","Portfolio","props","handleStockFormSubmit","ticker","quantity","fetch","then","resp","json","stockData","userBalance","userData","balance","transactionTotal","alert","handleStock","catch","error","price","total","method","headers","body","JSON","stringify","handleTransaction","name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,uBAAzB;;AAEA,MAAMC,SAAS,GAAGC,KAAK,IAAI;AAEzB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAAMC,qBAAqB,GAAG,CAACC,MAAD,EAASC,QAAT,KAAsB;AAClDC,IAAAA,KAAK,0EAAmEF,MAAnE,8BAAL,CACGG,IADH,CACQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADhB,EAEGF,IAFH,CAEQG,SAAS,IAAG;AAChB,UAAIC,WAAW,GAAGT,KAAK,CAACU,QAAN,CAAeC,OAAjC;AACA,UAAIC,gBAAgB,GAAGJ,SAAS,CAAC,cAAD,CAAT,CAA0B,WAA1B,IAAyCL,QAAhE;;AACA,UAAGM,WAAW,GAAGG,gBAAjB,EAAkC;AAChCC,QAAAA,KAAK,sDAA+CD,gBAA/C,OAAL;AACD,OAFD,MAEO;AACLE,QAAAA,WAAW,CAACZ,MAAD,EAASC,QAAT,EAAmBM,WAAnB,EAAgCG,gBAAhC,CAAX;AACD;AACF,KAVH,EAWGG,KAXH,CAWSC,KAAK,IAAI;AACdH,MAAAA,KAAK,CAAC,0BAAD,CAAL;AACD,KAbH;AAcD,GAfD;;AAiBA,QAAMC,WAAW,GAAG,CAACZ,MAAD,EAASe,KAAT,EAAgBN,OAAhB,EAAyBO,KAAzB,KAAmC;AACrDd,IAAAA,KAAK,CAAC,8BAAD,EAAiC;AACpCe,MAAAA,MAAM,EAAE,MAD4B;AAEpCC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,kBAAU;AAFH,OAF2B;AAMpCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBrB,QAAAA,MAAM,EAAEA,MADW;AAEnBe,QAAAA,KAAK,EAAEA;AAFY,OAAf,EAIHZ,IAJG,CAIEC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAJV,EAKHF,IALG,CAKEG,SAAS,IAAI;AACjBgB,QAAAA,iBAAiB,CAAChB,SAAD,EAAYG,OAAZ,EAAqBO,KAArB,CAAjB;AACD,OAPG;AAN8B,KAAjC,CAAL;AAeD,GAhBD;;AAkBA,QAAMM,iBAAiB,GAAG,CAAChB,SAAD,EAAYG,OAAZ,EAAqBO,KAArB,KAA+B,CAExD,CAFD;;AAIA,SACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,UAEOlB,KAAK,CAACU,QAAN,CAAee,IAFtB,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAIYzB,KAAK,CAACU,QAAN,CAAeC,OAJ3B,EAKE,oBAAC,YAAD,oBAAkBX,KAAlB;AAAyB,IAAA,qBAAqB,EAAEC,qBAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KALF,CADF;AASD,CAvFD;;AAyFA,eAAeF,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport BuyStockForm from '../forms/BuyStockForm'\n\nconst Portfolio = props => {\n\n  // const [userData, setUserData] = useState([])\n\n  // useEffect(() => {\n  //   debugger\n  //   if (localStorage.token) {\n  //     fetch('/profile', {\n  //       headers: {\n  //         Authorization: localStorage.token\n  //       }\n  //     })\n  //       .then(resp => resp.json())\n  //       .then(userInfo => {\n  //         debugger\n  //         setUserData(userInfo.data.attributes)\n  //       })\n  //   } else {\n  //     props.history.push('/signin')\n  //   }\n  // }, [userData])  \n\n  // state = { userData: '' }\n\n  // componentDidMount() {\n  //   if (localStorage.token) {\n  //     fetch('http://localhost:3000/profile', {\n  //       headers: {\n  //         Authorization: localStorage.token\n  //       }\n  //     })\n  //       .then(resp => resp.json())\n  //       .then(userInfo => {\n  //         this.setState({ userData: userInfo.data.attributes })\n  //       })\n  //   }\n  // }\n  // render(){\n\n  const handleStockFormSubmit = (ticker, quantity) => {\n    fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${ticker}&apikey=GJNL5RPAWAUNFOK6`)\n      .then(resp => resp.json())\n      .then(stockData =>{\n        let userBalance = props.userData.balance\n        let transactionTotal = stockData[\"Global Quote\"][\"05. price\"] * quantity\n        if(userBalance < transactionTotal){\n          alert(`Balance insufficient. Transaction total is ${transactionTotal}.`)\n        } else {\n          handleStock(ticker, quantity, userBalance, transactionTotal)\n        }\n      })\n      .catch(error => {\n        alert(\"Incorrect Ticker Symbol.\")\n      })\n  }\n\n  const handleStock = (ticker, price, balance, total) => {\n    fetch('http://localhost:3000/stocks', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({\n        ticker: ticker,\n        price: price\n      })\n        .then(resp => resp.json())\n        .then(stockData => {\n          handleTransaction(stockData, balance, total)\n        })\n    })\n  }\n\n  const handleTransaction = (stockData, balance, total) => {\n\n  }\n\n  return (\n    <div className=\"portfolio\">\n      <h2 className=\"page-header\">Portfolio</h2>\n      Hi, {props.userData.name}\n      <br />\n      Balance: {props.userData.balance}\n      <BuyStockForm {...props} handleStockFormSubmit={handleStockFormSubmit}/>\n    </div>\n  )\n}\n\nexport default Portfolio"]},"metadata":{},"sourceType":"module"}