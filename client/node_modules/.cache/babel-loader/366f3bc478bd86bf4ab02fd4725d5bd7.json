{"ast":null,"code":"var _jsxFileName = \"/Users/aaronchu/Development/stock-portfolio-app/frontend/src/containers/PortfolioPage.js\";\nimport React from 'react';\nimport Portfolio from './Portfolio';\n\nclass PortfolioPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userData: '',\n      balance: 0\n    };\n\n    this.handleBalanceChange = remainingBalance => {\n      fetch(\"http://localhost:3000/users/\".concat(this.props.userData.id), {\n        method: 'PATCH',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          balance: remainingBalance\n        })\n      }).then(resp => resp.json()).then(userData => {\n        this.setState({\n          userData: userData.data\n        });\n        window.location.reload();\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch('http://localhost:3000/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      }).then(resp => resp.json()).then(userInfo => {\n        this.setState({\n          userData: userInfo.data,\n          balance: userInfo.data.attributes.balance\n        });\n      });\n    }\n  }\n\n  // useEffect(() => {\n  //   if (props.userData !== \"\") {\n  //     setUserData(props.userData)\n  //   } else {\n  //     props.history.push('/signin')\n  //   }\n  // }, [userData])\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"page-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"Portfolio\"), \"Hi, \", this.state.userData ? this.state.userData.attributes.name : null, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), \"Balance: \", this.state.balance ? this.state.balance : null, React.createElement(Portfolio, Object.assign({}, this.props, {\n      handleBalanceChange: this.handleBalanceChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default PortfolioPage;","map":{"version":3,"sources":["/Users/aaronchu/Development/stock-portfolio-app/frontend/src/containers/PortfolioPage.js"],"names":["React","Portfolio","PortfolioPage","Component","state","userData","balance","handleBalanceChange","remainingBalance","fetch","props","id","method","headers","body","JSON","stringify","then","resp","json","setState","data","window","location","reload","componentDidMount","localStorage","token","Authorization","userInfo","attributes","render","name"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAEA,MAAMC,aAAN,SAA4BF,KAAK,CAACG,SAAlC,CAA4C;AAAA;AAAA;AAAA,SAE1CC,KAF0C,GAElC;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,OAAO,EAAE;AAFH,KAFkC;;AAAA,SAwB1CC,mBAxB0C,GAwBnBC,gBAAD,IAAsB;AAC1CC,MAAAA,KAAK,uCAAgC,KAAKC,KAAL,CAAWL,QAAX,CAAoBM,EAApD,GAA0D;AAC7DC,QAAAA,MAAM,EAAE,OADqD;AAE7DC,QAAAA,OAAO,EAAE;AACP,oBAAU,kBADH;AAEP,0BAAgB;AAFT,SAFoD;AAM7DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEV,UAAAA,OAAO,EAAEE;AAAX,SAAf;AANuD,OAA1D,CAAL,CAQGS,IARH,CAQQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EARhB,EASGF,IATH,CASQZ,QAAQ,IAAI;AAChB,aAAKe,QAAL,CAAc;AAAEf,UAAAA,QAAQ,EAAEA,QAAQ,CAACgB;AAArB,SAAd;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,OAZH;AAaD,KAtCyC;AAAA;;AAO1CC,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,YAAY,CAACC,KAAjB,EAAwB;AACtBlB,MAAAA,KAAK,CAAC,+BAAD,EAAkC;AACrCI,QAAAA,OAAO,EAAE;AACPe,UAAAA,aAAa,EAAEF,YAAY,CAACC;AADrB;AAD4B,OAAlC,CAAL,CAKGV,IALH,CAKQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EALhB,EAMGF,IANH,CAMQY,QAAQ,IAAI;AAChB,aAAKT,QAAL,CAAc;AACZf,UAAAA,QAAQ,EAAEwB,QAAQ,CAACR,IADP;AAEZf,UAAAA,OAAO,EAAEuB,QAAQ,CAACR,IAAT,CAAcS,UAAd,CAAyBxB;AAFtB,SAAd;AAID,OAXH;AAYD;AACF;;AAkBD;AACA;AACA;AACA;AACA;AACA;AACA;AACAyB,EAAAA,MAAM,GAAG;AAEP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,UAEO,KAAK3B,KAAL,CAAWC,QAAX,GAAsB,KAAKD,KAAL,CAAWC,QAAX,CAAoByB,UAApB,CAA+BE,IAArD,GAA4D,IAFnE,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,eAIY,KAAK5B,KAAL,CAAWE,OAAX,GAAqB,KAAKF,KAAL,CAAWE,OAAhC,GAA0C,IAJtD,EAKE,oBAAC,SAAD,oBAAe,KAAKI,KAApB;AAA2B,MAAA,mBAAmB,EAAE,KAAKH,mBAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OALF,CADF;AASD;;AA1DyC;;AA6D5C,eAAeL,aAAf","sourcesContent":["import React from 'react'\nimport Portfolio from './Portfolio'\n\nclass PortfolioPage extends React.Component {\n\n  state = {\n    userData: '',\n    balance: 0\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch('http://localhost:3000/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      })\n        .then(resp => resp.json())\n        .then(userInfo => {\n          this.setState({\n            userData: userInfo.data,\n            balance: userInfo.data.attributes.balance\n          })\n        })\n    }\n  }\n\n  handleBalanceChange = (remainingBalance) => {\n    fetch(`http://localhost:3000/users/${this.props.userData.id}`, {\n      method: 'PATCH',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ balance: remainingBalance })\n    })\n      .then(resp => resp.json())\n      .then(userData => {\n        this.setState({ userData: userData.data })\n        window.location.reload()\n      })\n  }\n\n  // useEffect(() => {\n  //   if (props.userData !== \"\") {\n  //     setUserData(props.userData)\n  //   } else {\n  //     props.history.push('/signin')\n  //   }\n  // }, [userData])\n  render() {\n\n    return (\n      <div>\n        <h2 className=\"page-header\">Portfolio</h2>\n        Hi, {this.state.userData ? this.state.userData.attributes.name : null}\n        <br />\n        Balance: {this.state.balance ? this.state.balance : null}\n        <Portfolio {...this.props} handleBalanceChange={this.handleBalanceChange} />\n      </div>\n    )\n  }\n}\n\nexport default PortfolioPage"]},"metadata":{},"sourceType":"module"}