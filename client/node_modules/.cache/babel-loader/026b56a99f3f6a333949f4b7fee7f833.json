{"ast":null,"code":"var _jsxFileName = \"/Users/aaronchu/Development/stock-portfolio-app/frontend/src/App.js\";\nimport React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport SignIn from './containers/SignIn';\nimport Register from './containers/Register';\nimport Portfolio from './containers/Portfolio';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userData: ''\n    };\n\n    this.handleSubmit = (userData, history, endpoint, alertMessage) => {\n      fetch(\"http://localhost:3000/\".concat(endpoint), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      }).then(resp => resp.json()).then(parsedResponse => {\n        if (parsedResponse.token) {\n          localStorage.setItem('token', parsedResponse.token);\n          this.setState({\n            userData: parsedResponse.user\n          });\n          history.push('/portfolio');\n        } else {\n          alert(alertMessage);\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch('/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      }).then(resp => resp.json()).then(userInfo => {\n        this.setState({\n          userData: userInfo.data.attributes\n        });\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/portfolio\",\n      render: routerProps => React.createElement(Portfolio, Object.assign({}, routerProps, {\n        userData: this.state.userData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }), localStorage.token ? React.createElement(Redirect, {\n      to: \"/portfolio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }) : React.createElement(Route, {\n      path: \"/signin\",\n      render: routerProps => React.createElement(SignIn, Object.assign({}, routerProps, {\n        handleSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), localStorage.token ? React.createElement(Redirect, {\n      to: \"/portfolio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }) : React.createElement(Route, {\n      path: \"/register\",\n      render: routerProps => React.createElement(Register, Object.assign({}, routerProps, {\n        handleSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/aaronchu/Development/stock-portfolio-app/frontend/src/App.js"],"names":["React","Switch","Route","Redirect","SignIn","Register","Portfolio","App","Component","state","userData","handleSubmit","history","endpoint","alertMessage","fetch","method","headers","body","JSON","stringify","then","resp","json","parsedResponse","token","localStorage","setItem","setState","user","push","alert","componentDidMount","Authorization","userInfo","data","attributes","render","routerProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom'\nimport SignIn from './containers/SignIn'\nimport Register from './containers/Register'\nimport Portfolio from './containers/Portfolio'\n\nclass App extends React.Component {\n\n  state = { userData: '' }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch('/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      })\n        .then(resp => resp.json())\n        .then(userInfo => {\n          this.setState({ userData: userInfo.data.attributes })\n        })\n    }\n  }\n\n  handleSubmit = (userData, history, endpoint, alertMessage) => {\n    fetch(`http://localhost:3000/${endpoint}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify(userData)\n    })\n      .then(resp => resp.json())\n      .then(parsedResponse => {\n        if (parsedResponse.token) {\n          localStorage.setItem('token', parsedResponse.token)\n          this.setState({ userData: parsedResponse.user })\n          history.push('/portfolio')\n        } else {\n          alert(alertMessage)\n        }\n      })\n  }\n\n  render() {\n    return (\n      <Switch>\n        <Route path='/portfolio' render={(routerProps) => <Portfolio {...routerProps} userData={this.state.userData} />} />\n        {\n          localStorage.token ?\n            <Redirect to='/portfolio' />\n            :\n            <Route path='/signin' render={(routerProps) => <SignIn {...routerProps} handleSubmit={this.handleSubmit} />} />\n        }\n        {\n          localStorage.token ?\n            <Redirect to='/portfolio' />\n            :\n            <Route path='/register' render={(routerProps) => <Register {...routerProps} handleSubmit={this.handleSubmit} />} />\n        }\n      </Switch>\n    );\n  }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}